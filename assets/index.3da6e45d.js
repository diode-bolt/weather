(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&m(l)}).observe(document,{childList:!0,subtree:!0});function p(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function m(t){if(t.ep)return;t.ep=!0;const r=p(t);fetch(t.href,r)}})();document.addEventListener("DOMContentLoaded",function(){let i="Astana",u=document.querySelector(".location__place"),p=document.querySelector(".temperature"),m=document.querySelector(".wind"),t=document.querySelector(".desrription_location"),r=document.querySelector(".search__location"),l=r.querySelector("input[type='text']"),g=document.querySelector(".weatherIMG"),s=document.createElement("div"),d=document.createElement("ol"),f;const v="https://api.openweathermap.org/geo/1.0/direct?limit=5&appid=6e1d8dc51c469cac8afd31a78b90ebd9&q=",w="https://api.openweathermap.org/data/2.5/weather?appid=6e1d8dc51c469cac8afd31a78b90ebd9&lat=";y(),s.className="places",d.className="places-list",r.addEventListener("submit",function(e){e.preventDefault(),s.remove(),i=l.value,i&&y()}),d.addEventListener("click",e=>{let n=e.target.index;y(n),i=f[n].name,s.remove()}),document.addEventListener("click",e=>{e.target!=l&&s.remove()});let L=function(){let e;function n(){e&&clearTimeout(e),e=setTimeout(async function(){if(l.value=="")return;let a=await h(l.value);f=a,b(a)},1e3)}return n}();r.addEventListener("keydown",()=>L());function b(e){d.innerHTML&&(d.innerHTML=""),r.after(s),s.append(d),d.append(q(e))}function q(e){var a;let n=new DocumentFragment;for(let o=0;o<e.length;o++){let c=document.createElement("li");((a=e[o])==null?void 0:a.state)!=null?(c.append(e[o].name+", country: "+e[o].country+", state: "+e[o].state),n.append(c)):c.append(e[o].name+", country: "+e[o].country),c.index=o,n.append(c)}return n}async function h(e){return await fetch(v+e).then(n=>n.json())}async function y(e=0){let n;arguments.length==0?n=await h(i):n=f;let a=n[e].lat,o=n[e].lon;await fetch(w+`${a}&lon=${o}`).then(c=>c.json()).then(c=>E(c))}function E(e){u.innerText=i,p.innerText=(e.main.temp-273).toFixed(1)+"\xB0C",m.innerText=e.wind.speed+" m/s",t.innerText=e.weather[0].description,g.src=P(e.weather[0].description)}function P(e){const n="img/",a={"light snow":"snowy-1.svg","Partly cloudy":"cloudy-1-day.svg","Light rain":"rainy-1.svg",Clear:"clear-night.svg",Sunny:"clear-day.svg","overcast clouds":"cloudy.svg",haze:"haze.svg","clear sky":"clear-day.svg","broken clouds":"cloudy-1-day.svg","scattered clouds":"cloudy-1-day.svg"};return e=e.split(",")[0],n+a[e]}});
