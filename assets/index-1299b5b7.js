(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function m(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(n){if(n.ep)return;n.ep=!0;const r=m(n);fetch(n.href,r)}})();document.addEventListener("DOMContentLoaded",function(){let d="Astana",i=document.querySelector(".location__place"),m=document.querySelector(".temperature"),u=document.querySelector(".wind"),n=document.querySelector(".desrription_location"),r=document.querySelector(".search__location"),a=r.querySelector("input[type='text']"),y=document.querySelector(".weatherIMG"),l=document.createElement("ol");l.className="places-list";let f;const g="https://api.openweathermap.org/geo/1.0/direct?limit=5&appid=6e1d8dc51c469cac8afd31a78b90ebd9&q=",v="https://api.openweathermap.org/data/2.5/weather?appid=6e1d8dc51c469cac8afd31a78b90ebd9&lat=";let w=function(){let e;function t(){e&&clearTimeout(e),e=setTimeout(async function(){if(a.value=="")return;let o=await p(a.value);f=o,L(o)},1e3)}return t}();r.addEventListener("keydown",w),r.addEventListener("submit",function(e){if(e.preventDefault(),l.remove(),!a.value){alert("enter place");return}h()}),l.addEventListener("click",e=>{let t=e.target.index;h(t),l.remove()}),document.addEventListener("click",e=>{e.target!=a&&l.remove()});function L(e){if(l.innerHTML&&(l.innerHTML=""),e.length==0){alert("Place not found!");return}r.after(l),l.append(S(e))}function S(e){let t=new DocumentFragment;for(let o=0;o<e.length;o++){let c=document.createElement("li");e[o].state?c.append(e[o].name+", country: "+e[o].country+", state: "+e[o].state):c.append(e[o].name+", country: "+e[o].country),c.index=o,t.append(c)}return t}async function p(e){return await fetch(g+e).then(t=>t.json()).catch(t=>{alert("whoops! Something went wrong : "+t)})}async function h(e=0){let t;if(arguments.length==0?t=await p(a.value):t=f,!t[e])return;let o=t[e].lat,c=t[e].lon;d=t[e].name,await fetch(v+`${o}&lon=${c}`).then(s=>s.json()).then(s=>P(s)).catch(s=>{alert("whoops! Something went wrong : "+s)})}function P(e){i.innerText=d,m.innerText=(e.main.temp-273).toFixed(1)+"Â°C",u.innerText=e.wind.speed+" m/s",n.innerText=e.weather[0].description,y.src=b(e.weather[0].description)}function b(e){const t="assets/img/",o={"light snow":"snowy-1.svg","Partly cloudy":"cloudy-1-day.svg","Light rain":"rainy-1.svg",Clear:"clear-night.svg",Sunny:"clear-day.svg","overcast clouds":"cloudy.svg",haze:"haze.svg","clear sky":"clear-day.svg","broken clouds":"cloudy-1-day.svg","scattered clouds":"cloudy-1-day.svg"};return e=e.split(",")[0],t+o[e]}});
