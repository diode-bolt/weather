(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function y(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=y(n);fetch(n.href,o)}})();document.addEventListener("DOMContentLoaded",function(){let p="Astana",c=document.querySelector(".location__place"),y=document.querySelector(".temperature__now"),s=document.querySelector(".temperature__min"),n=document.querySelector(".temperature__max"),o=document.querySelector(".wind"),l=document.querySelector(".arrow-wind");document.querySelector(".desrription_location");let v=document.querySelector(".location__last-update"),m=document.querySelector(".search__location"),u=m.querySelector("input[type='text']"),h=document.querySelector(".weatherIMG"),S=document.getElementById("humidity"),T=document.getElementById("arrow"),_=document.getElementById("pressure"),L=document.querySelector(".location__date"),a=document.createElement("ol");a.className="places-list";let f;const q="https://api.openweathermap.org/geo/1.0/direct?limit=5&appid=6e1d8dc51c469cac8afd31a78b90ebd9&q=",M="https://api.openweathermap.org/data/2.5/weather?appid=6e1d8dc51c469cac8afd31a78b90ebd9&lat=";L.innerText=new Intl.DateTimeFormat({weekday:"short",day:"2-digit",month:"short"}).format(new Date);let x=function(){let e;function t(){e&&clearTimeout(e),e=setTimeout(async function(){if(u.value=="")return;let r=await g(u.value);f=r,I(r)},1e3)}return t}();m.addEventListener("keydown",x),m.addEventListener("submit",function(e){if(e.preventDefault(),a.remove(),!u.value){alert("enter place");return}w()}),a.addEventListener("click",e=>{let t=e.target.index;w(t),a.remove()}),document.addEventListener("click",e=>{e.target!=u&&a.remove()});function I(e){if(a.innerHTML&&(a.innerHTML=""),e.length==0){alert("Place not found!");return}m.after(a),a.append(E(e))}function E(e){let t=new DocumentFragment;for(let r=0;r<e.length;r++){let i=document.createElement("li");e[r].state?i.append(e[r].name+", country: "+e[r].country+", state: "+e[r].state):i.append(e[r].name+", country: "+e[r].country),i.index=r,t.append(i)}return t}async function g(e){return await fetch(q+e).then(t=>t.json()).catch(t=>{alert("whoops! Something went wrong : "+t)})}async function w(e=0){let t;if(arguments.length==0?t=await g(u.value):t=f,!t[e])return;let r=t[e].lat,i=t[e].lon;p=t[e].name,await fetch(M+`${r}&lon=${i}`).then(d=>d.json()).then(d=>P(d)).catch(d=>{alert("whoops! Something went wrong : "+d)})}function P(e){c.innerText=p,y.innerText=Math.round((e.main.temp-273).toFixed(1))+"°C",o.innerText=e.wind.speed+" m/s",h.src=b(e.weather[0].description),h.alt=h.title=e.weather[0].description,S.innerText=e.main.humidity+"%",_.innerText=Math.round(e.main.pressure/1.333)+" mmHg",s.innerText=Math.round((e.main.temp_min-273).toFixed(1))+"°C",n.innerText=Math.round((e.main.temp_max-273).toFixed(1))+"°C",v.innerText=`last update in ${new Date().getHours()}: ${new Date().getMinutes()}`,D(e.main.humidity),C(e.wind.deg)}function b(e){const t="img/",r={"light snow":"snowy-1.svg","partly cloudy":"cloudy-1-day.svg","light rain":"rainy-1.svg",clear:"clear-night.svg",Sunny:"clear-day.svg","overcast clouds":"cloudy.svg",haze:"haze.svg","clear sky":"clear-day.svg","broken clouds":"cloudy-1-day.svg","scattered clouds":"cloudy-1-day.svg","clear day":"clear-day.svg"};return e=e.split(",")[0],t+r[e]}function D(e){T.style.transform=`rotate(${-180+e*2}deg)`}function C(e){l.style.transform=`rotate(${e-90}deg)`}});
